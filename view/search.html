<!doctype html>
<html lang="en" class="h-100">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
  <style>
    img{
      width:100%;
      height:auto;
      object-fit:contain;
    }
  </style>
  <title>Search</title>
</head>

<body class="d-flex flex-column h-100">
  <header>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark text-white">
      <div class="container-fluid">
        <a class="navbar-brand" href="#">Hamilton</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
          aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav col-12 col-lg-auto me-auto mb-2 justify-content-center mb-md-0">
            <li><a href="../index.html" class="nav-link px-2 ">Home</a></li>
            <li><a href="search.html" class="nav-link px-2 active">Search</a></li>
            <li><a href="map.html" class="nav-link px-2 ">Map</a></li>
            <li><a href="calculator.html" class="nav-link px-2 ">Calculator</a></li>
            <li><a href="#" class="nav-link px-2 ">Realtors</a></li>
            <li><a href="#" class="nav-link px-2 ">Login</a></li>
          </ul>

          <form class="col-12 col-lg-auto mb-3 mb-lg-0 me-lg-3">
            <input type="search" class="form-control form-control-dark" placeholder="Search..." aria-label="Search">
          </form>

          <div class="text-end">
            <button type="button" class="btn btn-warning">Sign-up</button>
          </div>
        </div>
      </div>
    </nav>
  </header>
  <!--
      Starting of Searching 
    -->
  <div class="container-fluid">
    <div class="row col-lg-8 my-3">
      <h5>Community</h5>
      <div class="btn-group" role="group">
        <input type="radio" class="btn-check" name="btnradio" id="all" autocomplete="off" checked>
        <label class="btn btn-outline-primary" for="all">All</label>

        <input type="radio" class="btn-check" name="btnradio" id="mountain" autocomplete="off">
        <label class="btn btn-outline-primary" for="mountain">Mountain</label>

        <input type="radio" class="btn-check" name="btnradio" id="ancaster" autocomplete="off">
        <label class="btn btn-outline-primary" for="ancaster">Ancaster</label>

        <input type="radio" class="btn-check" name="btnradio" id="stoney_creek" autocomplete="off">
        <label class="btn btn-outline-primary" for="stoney_creek">Stoney Creek</label>

        <input type="radio" class="btn-check" name="btnradio" id="dundas" autocomplete="off">
        <label class="btn btn-outline-primary" for="dundas">Dundas</label>

        <input type="radio" class="btn-check" name="btnradio" id="waterdown" autocomplete="off">
        <label class="btn btn-outline-primary" for="waterdown">Waterdown</label>
      </div>
    </div>
    <div class="row col-lg-8 my-3">
      <div class="col-lg-2">
        <h5>Bedroom </h5>
        <select class="form-select" id = "bedrooms">
          <option selected></option>
          <option value="1">1</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5</option>
          <option value="6">6</option>
          <option value="7">7</option>
        </select>
      </div>
      <div class="col-lg-4 align-self-end">
        <button type="button" class="btn btn-outline-secondary mt-3" id="filter_by_bedroom">Filter By Bedroom</button>
      </div>
      <div class="col-lg-2">
        <h5>Bathroom </h5>
        <select class="form-select" id = "bathrooms">
          <option selected></option>
          <option value="1">1</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5</option>
          <option value="6">6</option>
          <option value="7">7</option>
        </select>
      </div>
      <div class="col-lg-4 align-self-end">
        <button type="button" class="btn btn-outline-secondary mt-3" id="filter_by_bathroom">Filter By Bathroom</button>
      </div>
    </div>
    <div class="row col-lg-8 my-3">
      <div class="col-lg-8">
        <h5>Price Range</h5>
        <div class="input-group">
          <span class="input-group-text">Min Price</span>
          <input type="text" class="form-control" id="min_pirce">
          <span class="input-group-text">Max Price</span>
          <input type="text" class="form-control" id="max_pirce">
        </div>
      </div>
      <div class="col-lg-4 align-self-end">
        <button type="button" class="btn btn-outline-secondary mt-3" id="filter_by_price">Filter By Price</button>
      </div>
    </div>
    <div class="row my-3">
      <div class="col-lg-5">
        <table class="table table-hover table-bordered" id = "output"></table>
      </div>
    </div>
  </div>
  
  <!--
      End of Searching
    -->
  <footer class="container footer mt-auto">
    <div class="d-flex flex-wrap justify-content-between align-items-center py-3 my-4 border-top">
      <div class="col-md-4 d-flex align-items-center">
        <a href="/" class="mb-3 me-2 mb-md-0 text-muted text-decoration-none lh-1">
          <svg class="bi" width="30" height="24">
            <use xlink:href="#bootstrap"></use>
          </svg>
        </a>
        <span class="text-muted">Â© 2022 Hamilton Homes Real Estate, Inc</span>
      </div>
      <ul class="nav col-md-4 justify-content-end">
        <li class="nav-item"><a href="../index.html" class="nav-link px-2 text-muted">Home</a></li>
        <li class="nav-item"><a href="#" class="nav-link px-2 text-muted">Features</a></li>
        <li class="nav-item"><a href="#" class="nav-link px-2 text-muted">Pricing</a></li>
        <li class="nav-item"><a href="#" class="nav-link px-2 text-muted">FAQs</a></li>
        <li class="nav-item"><a href="#" class="nav-link px-2 text-muted">About</a></li>
      </ul>
    </div>
  </footer>
</body>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"
  integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
  integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

<script>

  $(document).ready(function () {
    //all housing ajax handling
    $("#all").click(function () {
      function handle_response(response) {
        
        let table = "<tbody>";
        for (let i = 0; i < response.length; i++)
        {
          table += "<tr><td><img src=\"../img/"+  response[i].img + "\"><br>"
                  + "<b>$" + response[i].price + "</b><br>" 
                  + response[i].address + ", "+ response[i].community + ", " + response[i].city + ", " + response[i].province + "</br>"
                  + "Bedrooms: " + response[i].bedrooms + "&nbsp&nbsp&nbsp&nbsp Bathrooms: " + response[i].bathrooms + "</br></br>"
                  + response[i].description + "</td></tr>";
        }
        table += "</tbody>";   
        $("#output").html(table);
      }

      $.get({
        url: "http://localhost:3000/all",
        success: handle_response,
        dataType: "json"
      });
    });

    //filter by mountain community  
    $("#mountain").click(function () {
      function handle_response(response) {
        let table = "<tbody>";
        for (let i = 0; i < response.length; i++)
        {
          table += "<tr><td><img src=\"../img/"+  response[i].img + "\"><br>"
                  + "<b>$" + response[i].price + "</b><br>" 
                  + response[i].address + ", "+ response[i].community + ", " + response[i].city + ", " + response[i].province + "</br>"
                  + "Bedrooms: " + response[i].bedrooms + "&nbsp&nbsp&nbsp&nbsp Bathrooms: " + response[i].bathrooms + "</br></br>"
                  + response[i].description + "</td></tr>";
        }
        table += "</tbody>";   
        $("#output").html(table);  
      }
      $.get({
        url: "http://localhost:3000/community_search",
        data: { community: "Mountain" },
        success: handle_response,
        dataType: "json"
      });
    });

    //filter by Ancaster community  
    $("#ancaster").click(function () {
      function handle_response(response) {
        let table = "<tbody>";
        for (let i = 0; i < response.length; i++)
        {
          table += "<tr><td><img src=\"../img/"+  response[i].img + "\"><br>"
                  + "<b>$" + response[i].price + "</b><br>" 
                  + response[i].address + ", "+ response[i].community + ", " + response[i].city + ", " + response[i].province + "</br>"
                  + "Bedrooms: " + response[i].bedrooms + "&nbsp&nbsp&nbsp&nbsp Bathrooms: " + response[i].bathrooms + "</br></br>"
                  + response[i].description + "</td></tr>";
        }
        table += "</tbody>";   
        $("#output").html(table);  
      }
      $.get({
        url: "http://localhost:3000/community_search",
        data: { community: "Ancaster" },
        success: handle_response,
        dataType: "json"
      });
    });

    //filter by Stoney Creek community  
    $("#stoney_creek").click(function () {
      function handle_response(response) {
        let table = "<tbody>";
        for (let i = 0; i < response.length; i++)
        {
          table += "<tr><td><img src=\"../img/"+  response[i].img + "\"><br>"
                  + "<b>$" + response[i].price + "</b><br>" 
                  + response[i].address + ", "+ response[i].community + ", " + response[i].city + ", " + response[i].province + "</br>"
                  + "Bedrooms: " + response[i].bedrooms + "&nbsp&nbsp&nbsp&nbsp Bathrooms: " + response[i].bathrooms + "</br></br>"
                  + response[i].description + "</td></tr>";
        }
        table += "</tbody>";   
        $("#output").html(table);  
      }
      $.get({
        url: "http://localhost:3000/community_search",
        data: { community: "Stoney Creek" },
        success: handle_response,
        dataType: "json"
      });
    });

    //filter by Dundas community  
    $("#dundas").click(function () {
      function handle_response(response) {
        let table = "<tbody>";
        for (let i = 0; i < response.length; i++)
        {
          table += "<tr><td><img src=\"../img/"+  response[i].img + "\"><br>"
                  + "<b>$" + response[i].price + "</b><br>" 
                  + response[i].address + ", "+ response[i].community + ", " + response[i].city + ", " + response[i].province + "</br>"
                  + "Bedrooms: " + response[i].bedrooms + "&nbsp&nbsp&nbsp&nbsp Bathrooms: " + response[i].bathrooms + "</br></br>"
                  + response[i].description + "</td></tr>";
        }
        table += "</tbody>";   
        $("#output").html(table);  
      }
      $.get({
        url: "http://localhost:3000/community_search",
        data: { community: "Dundas" },
        success: handle_response,
        dataType: "json"
      });
    });

    //filter by Waterdown community  
    $("#waterdown").click(function () {
      function handle_response(response) {
        let table = "<tbody>";
        for (let i = 0; i < response.length; i++)
        {
          table += "<tr><td><img src=\"../img/"+  response[i].img + "\"><br>"
                  + "<b>$" + response[i].price + "</b><br>" 
                  + response[i].address + ", "+ response[i].community + ", " + response[i].city + ", " + response[i].province + "</br>"
                  + "Bedrooms: " + response[i].bedrooms + "&nbsp&nbsp&nbsp&nbsp Bathrooms: " + response[i].bathrooms + "</br></br>"
                  + response[i].description + "</td></tr>";
        }
        table += "</tbody>";   
        $("#output").html(table);  
      }
      $.get({
        url: "http://localhost:3000/community_search",
        data: { community: "Waterdown" },
        success: handle_response,
        dataType: "json"
      });
    });

    //fliter by bedroom numbers
    $("#filter_by_bedroom").click(function () {
      function handle_response(response) {
        let table = "<tbody>";
        for (let i = 0; i < response.length; i++)
        {
          table += "<tr><td><img src=\"../img/"+  response[i].img + "\"><br>"
                  + "<b>$" + response[i].price + "</b><br>" 
                  + response[i].address + ", "+ response[i].community + ", " + response[i].city + ", " + response[i].province + "</br>"
                  + "Bedrooms: " + response[i].bedrooms + "&nbsp&nbsp&nbsp&nbsp Bathrooms: " + response[i].bathrooms + "</br></br>"
                  + response[i].description + "</td></tr>";
        }
        table += "</tbody>";   
        $("#output").html(table);  
      }
      let number_of_bedrooms = parseInt($("#bedrooms").val());
      $.get({
        url: "http://localhost:3000/bed_search",
        data: { bedrooms: number_of_bedrooms },
        success: handle_response,
        dataType: "json"
      });
    });

    //fliter by bathroom numbers
    $("#filter_by_bathroom").click(function () {
      function handle_response(response) {
        let table = "<tbody>";
        for (let i = 0; i < response.length; i++)
        {
          table += "<tr><td><img src=\"../img/"+  response[i].img + "\"><br>"
                  + "<b>$" + response[i].price + "</b><br>" 
                  + response[i].address + ", "+ response[i].community + ", " + response[i].city + ", " + response[i].province + "</br>"
                  + "Bedrooms: " + response[i].bedrooms + "&nbsp&nbsp&nbsp&nbsp Bathrooms: " + response[i].bathrooms + "</br></br>"
                  + response[i].description + "</td></tr>";
        }
        table += "</tbody>";   
        $("#output").html(table);  
      }
      let number_of_bathrooms = parseInt($("#bathrooms").val());
      $.get({
        url: "http://localhost:3000/bathroom_search",
        data: { bathrooms: number_of_bathrooms },
        success: handle_response,
        dataType: "json"
      });
    });

    //fliter by price range
    $("#filter_by_price").click(function () {
      function handle_response(response) {
        let table = "<tbody>";
        for (let i = 0; i < response.length; i++)
        {
          table += "<tr><td><img src=\"../img/"+  response[i].img + "\"><br>"
                  + "<b>$" + response[i].price + "</b><br>" 
                  + response[i].address + ", "+ response[i].community + ", " + response[i].city + ", " + response[i].province + "</br>"
                  + "Bedrooms: " + response[i].bedrooms + "&nbsp&nbsp&nbsp&nbsp Bathrooms: " + response[i].bathrooms + "</br></br>"
                  + response[i].description + "</td></tr>";
        }
        table += "</tbody>";   
        $("#output").html(table);  
      }
      let min_price = parseInt($("#min_pirce").val());
      let max_price = parseInt($("#max_pirce").val());

      $.get({
        url: "http://localhost:3000/price_search",
        data: { max: max_price, min: min_price },
        success: handle_response,
        dataType: "json"
      });
    });
  
  
  });

</script>

</html>